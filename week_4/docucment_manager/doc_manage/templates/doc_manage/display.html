{% extends 'doc_manage/base.html' %}
{% block main %}
{% if messages %}
<ul class="messages alert alert-danger list-group-none" role="alert">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<div>
  <h4 class="alert alert-danger text-center" role="alert" >Welcome {{user}}</h4> 
  <div class=" d-grid gap-2 d-md-flex justify-content-md-end sticky-top">
    <a class="btn btn-success m-3 " href="{% url 'upload' %}">upload File</a>
    <a class="btn btn-danger m-3" href="{% url 'logout' %}">Logout</a>
  </div>

  <div class="d-flex flex-row p-3">
<div class="p-3 m-2 ">
  <form>
    <input name="report_type" type="hidden" value='sort_by_name'>
    <button class="btn btn-primary" type="submit">Sort By Name </button>
</form>
</div>

<div class="p-3 m-2 ">
  <form>
    <input name="report_type" type="hidden" value='current_month'>
    <button class="btn btn-primary" type="submit">Current month </button>
</form>
</div>

<div class="p-3 m-2 ">
  <form>
    <input name="report_type" type="hidden" value='current_year'>
    <button class="btn btn-primary" type="submit">Current year </button>
</form>
</div>
</div>
</div>


<form action="{% url 'display' %}" method="POST" class="mx-3">
  
    {% csrf_token %}
    <div>
      <label for="start" class="mx-1">From </label>
        <input class="mr-2" type="date" id="start" name="startdate">
        <label class="mx-1" for="end">To </label>
        <input class="mx-2" type="date" id="end" name="enddate">
        <input class="btn btn-primary my-3" type="submit" name="submit" value="Show">
    </div>
  </form >



<table class="table table-hover mt-4 border-secondary">
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>File</th>
        <th>Date</th>
        <th></th>
</tr>
{% for value in context %}
<tr>
    <td>{{value.id}}</td>
    <td>{{ value.category.title }}</td>
    <td>{{ value.data }}</td>
    <td>{{ value.created_at }}</td>
    <td><a class="btn btn-primary" href="{{value.data.url}}" download="{{value.data.url}}" target="_blank">Download</a></td>
</tr>
{% endfor %}
</table>
{% endblock main %}

